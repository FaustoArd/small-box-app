
<body>
    <app-navbar></app-navbar>
    <div class="container-flex">
        <div class="row">
            <div class="col-md-2 ms-3 mt-3">
                    <input class="btn btn-sm" type="file" (change)="selectFile($event)"/>
                    <button id="btnUpload" class="btn btn-sm " (click)="uploadFile()">
                        Subir
                    </button>
                </div>
           <div class="col-md-6"></div>    
    <div class="col-md-2 mt-3">
        <button (click)="openDispatchCreationForm(dispatchCreationTemplate)" class="btn btn-sm ">Ingreso manual</button>
    </div>
        </div>
        
    </div>
    <div class="container-fluid  mt-1">
        <div class="row">
            <div class="col-md-4"> </div>
            <div class="col-md-4 mb-2 ms-2">
                
            <form class="form-inline mt-1" [formGroup]="findByExampleFormBuilder">
              
                <div class="input-group">
                    
                    <div class="form-group w-75 text-center">
                        <input id="searchInput" type="text" class="form-control border-dark" formControlName="example" id="example"
                            placeholder="Buscar..." (ngModelChange)="filterWorkTemplateTest()">
                        <div *ngIf="example.invalid && (example.dirty || example.touched)" class="text-danger">
                            <!-- <div *ngIf="example.errors?.['required']">
                                Debe ingresar un dato valido
                            </div> -->
                        </div>
                    </div>
                    
                </div>
            </form>
        </div>
        </div>
        <div id="main-row"  class="row mt-2 ">
            
                <div  class="col-md-1 mt-2">
                    <img id="thumbsUp" class="ms-1 mt-1 " src="./assets/img/calendar-days-solid.svg">
                </div>
                <div class="col-md-1  mt-2">
                    <img id="thumbsUp" class="ms-1 mt-1 " src="./assets/img/description_24dp_FILL0_wght400.svg">
                </div>
                <div class="col-md-1  mt-2">
                    <img id="thumbsUp" class="ms-1 mt-1 " src="./assets/img/tag_24dp_FILL0.svg">
                </div>
                <div class="col-md-1 ms-4  mt-2">
                    <h3 >Alc.</h3>
                </div>
                
                <div clasS="col-md-4  mt-2 text-center">
                    <img id="thumbsUp" class="ms-1 mt-1 " src="./assets/img/quick_reference_24dp.svg">
                </div>
                <div class="col-md-2  mt-2 text-center">
                    <img id="thumbsUp" class="ms-1 mt-1 " src="./assets/img/location-dot-solid.svg">
               
            </div>
           

        </div>
   
        <div  id="main-row" class="row " *ngFor="let d of dispatchs | paginate: { itemsPerPage: 20 ,currentPage: p }">
           
                <div  class="col-md-1  mt-2" >
                    <h4 >{{d.date | date : 'dd-MM-yyyy'}}</h4>
                </div>
                <div class="col-md-1  mt-2">
                    <h5 >{{d.type}}</h5>
                </div>
                <div class="col-md-1  mt-2">
                    <div id="doc_number" >{{d.docNumber}}
                    </div>
                </div>
                <div class="col-md-1 ms-4  mt-2">
                    <h5>{{d.volumeNumber}}</h5>
                   
                </div>
               
                <div clasS="col-md-4 mt-2">
                    <h4 >{{d.description}}
                    </h4>
                </div>
                <div class="col-md-2 mt-2">
                    <h5>{{d.toDependency}}
                    </h5>
                </div>
                
            </div>
            <pagination-controls (pageChange)="p = $event"></pagination-controls>

       
    </div> 
    <ng-template #dispatchCreationTemplate>
        <div class="row mt-2 mb-2">
            <form class="form-inline text-center ms-3 mt-1" [formGroup]="dispatchCreateForm">
    
                <div class="row ">
                    <div class="col-md-2">
    
                        <div class="form-group w-75">
                            <label for="date" class="form-label">Fecha</label>
                            <input type="date" class="form-control border-dark  " formControlName="date" id="date">
                            <div *ngIf="date.invalid && (date.dirty || date.touched)" class="text-danger">
                                <div *ngIf="date.errors?.['required']">
                                    Falta la fecha
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-1">
                        <div class="form-group d-inline">
                            <label for="type" class="form-label">Tipo</label>
                            <select id="type" formControlName="type" class="form-select  border-dark ">
                                <option type="text" class="form-control border-dark "
                                    *ngFor="let type of dispatchTypeList" id="type" [value]="type">
                                    {{type}}</option>
    
                            </select>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <div class="form-group">
                            <label for="docNumber" class="form-label">Numero</label>
                            <input type="text" class="form-control border-dark  " formControlName="docNumber"
                                id="docNumber">
                            <!-- <button id="btnSn" class="btn btn-sm mt-1" (click)="setNoNumberCorrespond()">S/N</button> -->
                            <div *ngIf="docNumber.invalid && (docNumber.dirty || docNumber.touched)"
                                class="text-danger">
                                <div *ngIf="docNumber.errors?.['required']">
                                    Falta El numero
                                </div>
                            </div>
    
                        </div>
                    </div>
                    <div class="col-md-1">
                        <div class="form-group">
                            <label for="volumeNumber" class="form-label">Alc.</label>
                            <input type="text" class="form-control border-dark  " formControlName="volumeNumber"
                                id="volumeNumber">
                            <div *ngIf="volumeNumber.invalid && (volumeNumber.dirty || volumeNumber.touched)"
                                class="text-danger">
                                <div *ngIf="volumeNumber.errors?.['required']">
                                    Falta El numero
                                </div>
                            </div>
    
                        </div>
                    </div>
                    <div class="col-md-2">
                        <div class="form-group ">
                            <label for="description" class="form-label">Descripcion</label>
                            <input type="text" class="form-control border-dark  " formControlName="description"
                                id="description">
                            <div *ngIf="description.invalid && (description.dirty || description.touched)"
                                class="text-danger">
                                <div *ngIf="description.errors?.['required']">
                                    Falta la descripcion
                                </div>
                            </div>
    
                        </div>
                    </div>
                    <div class="col-md-2">
                        <div class="form-group">
                            <label for="toDependency" class="form-label">Destino</label>
                            <select id="toDependency" formControlName="toDependency" class="form-select  border-dark ">
                                <option type="text" class="form-control border-dark "
                                    *ngFor="let destination of destinationsDtoList" id="type"
                                    [value]="destination.destination">
                                    {{destination.destination}}</option>
    
                            </select>
    
                        </div>
    
                    </div>
                    <div class="col-md-1 mt-4">
                        <button class="btn mt-1 border-dark" (click)="createDispatch()">Guardar</button>
                    </div>
    
                </div>
            </form>
        </div>
    </ng-template>
</body>

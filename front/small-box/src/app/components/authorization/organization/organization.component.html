<app-navbar></app-navbar>

<body>
  <div id="mainContainer" class="container-fluid mt-4">
    <div class="row">
      <div class="col-md-7"></div>
      <div class="col-md-4 ms-3">
        <div *ngIf="userSelected!=null || undefined">
          <span>Usuario seleccionado: </span>
          <h2>{{userSelected.name}} {{userSelected.lastname}}</h2>
        </div>
      </div>
    </div>
    <div class="row mt-3">
      <div class="col-4 ms-2">
        <!-- User table Selection -->
        <small>Seleccionar usuario</small>
        <div  class="overflow-scroll  border border-dark">
         
          <table   class="table table-fluid table-hover table-bordered table-striped">
            <thead>
              <tr>
                <th scope="col">ID</th>
                <th scope="col">Nombre</th>
                <th scope="col">Apellido</th>
                <th scope="col">Username</th>
                <th scope="col">Email</th>
                <th scope="col">Sel</th>
              </tr>
            </thead>
            <tbody>
              <!-- Iterate over usersDto -->
              <tr *ngFor="let user of usersDto">
                <th scope="row">{{user.id}}</th>
                <td>{{user.name}}</td>
                <td>{{user.lastname}}</td>
                <td>{{user.username}}</td>
                <td>{{user.email}}</td>
                <td class="mt-2">
                  <button (click)="selectUser(user.id)" class="btn btn-sm mx-2 ">-</button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div class="col-md-3">
        <!-- Organization selection -->
        <small>Asignar dependencia</small>
          <div id="table-div" class="overflow-scroll  border border-dark">
        <table id="userTable" class="table table-fluid table-hover table-bordered table-striped">
          <thead>
            <tr>
              <th scope="col">ID</th>
              <th scope="col">Dependencia</th>
              <th scope="col">Numero</th>
              <th scope="col">Asignar</th>
          </thead>
          <tbody>
            <tr *ngFor="let org of organizationsDto">
              <th scope="row">{{org.id}}</th>
              <td>{{org.organizationName}}</td>
              <td>{{org.organizationNumber}}</td>
              <td>
                <button class="btn btn-sm mx-2" (click)="assignOrganizationToUser(org.id)">-</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      </div>
      <div class="col-md-3">
        <!-- Table for organization deletion -->
        <small>Dependencias asignadas</small>
        <div id="table-div" class="overflow-scroll  border border-dark">
        <table id="userTable" class="table table-fluid table-hover table-bordered table-striped">
          <thead>
            <tr>
              <th scope="col">ID</th>
              <th scope="col">Dependencia</th>
              <th scope="col">Numero</th>
              <th scope="col">Eliminar</th>
          </thead>
          <tbody>
            <tr *ngFor="let org of orgsSelected">
              <th scope="row">{{org.id}}</th>
              <td>{{org.organizationName}}</td>
              <td>{{org.organizationNumber}}</td>
              <td>
                <button class="btn btn-sm mx-2" (click)="deleteOrganizationFromUser(org.id)">-</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      </div>
      <div class="col-md-1">
        <button id="btnApply" *ngIf="selectedUserId!=null" (click)="addOrganizationsToUser()"
          class="btn">Aplicar</button>
      </div>
    </div>
  </div>
</body>